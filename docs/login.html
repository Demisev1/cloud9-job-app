<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Login • Cloud 9 Jobs</title><link rel="stylesheet" href="style.css"><script src="config.js"></script><script src="api.js"></script></head>
<body>
<header><h1>Cloud 9 Jobs</h1><nav><a href="index.html">Home</a> <a href="apply.html">Apply</a> <a href="admin.html">Admin</a></nav></header>
<div class="card">
  <h2>Login</h2>
  <div class="row">
    <div><label>Email<br><input id="email" type="email" placeholder="you@example.com"></label></div>
    <div><label>Password<br><input id="password" type="password" placeholder="••••••••"></label></div>
  </div>
  <p><button id="loginBtn">Login</button> <button id="signupBtn">Create Applicant Account</button></p>
  <p id="msg"></p>
</div>
<script>
document.getElementById('loginBtn').onclick = async () => {
  const email = email.value.trim(); const password = document.getElementById('password').value;
  try {
    const { token, user } = await api('/auth/login', { method:'POST', body: JSON.stringify({ email, password }) });
    localStorage.setItem('token', token);
    document.getElementById('msg').textContent = 'Logged in as ' + user.email + ' (' + user.role + ')';
  } catch (e) { document.getElementById('msg').textContent = fmtErr(e); }
};
document.getElementById('signupBtn').onclick = async () => {
  const email = document.getElementById('email').value.trim(); const password = document.getElementById('password').value;
  try {
    const { token, user } = await api('/auth/register', { method:'POST', body: JSON.stringify({ email, password }) });
    localStorage.setItem('token', token);
    document.getElementById('msg').textContent = 'Account created: ' + user.email;
  } catch (e) { document.getElementById('msg').textContent = fmtErr(e); }
};
</script>
</body></html>
